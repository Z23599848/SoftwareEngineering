<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Software Development 2: Using MySQL with node.js | Roehampton</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Software Development 2: Using MySQL with node.js" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Hosts module content for computing at Roehampton." />
<meta property="og:description" content="Hosts module content for computing at Roehampton." />
<link rel="canonical" href="https://roehampton.github.io/module-content/msc-software-development-2/week-07/lab/" />
<meta property="og:url" content="https://roehampton.github.io/module-content/msc-software-development-2/week-07/lab/" />
<meta property="og:site_name" content="Roehampton" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Software Development 2: Using MySQL with node.js" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Hosts module content for computing at Roehampton.","headline":"Software Development 2: Using MySQL with node.js","url":"https://roehampton.github.io/module-content/msc-software-development-2/week-07/lab/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/module-content/assets/css/style.css?v=ea56b5ca3cc64b80129c924758c62c92b98b36d5">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/module-content/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      

      <h1 id="software-development-2-using-mysql-with-nodejs">Software Development 2: Using MySQL with node.js</h1>

<h2 id="prerequisites">Prerequisites</h2>

<p>Last week, you set up node.js, express.js and mysql using docker.  Today you will use the same set-up to practice retrieving data from a database and using the express framework to surface that data to the browser.</p>

<p>Next week, we will look at the PUG templating system that allows you to properly separate data from presentation, but this lab is crucial to enable you to fully understand the process and debugging techniques.</p>

<h2 id="understanding-asynchronous-javascript">Understanding asynchronous javascript</h2>

<p>Before you embark on using node.js to connect to a database you need to understand the basics of an important feature of javascript - synchronous and asynchronous code.</p>

<p>In most procedural code, you can be sure that your code will run simply in sequence, proceeding line by line, with the next line being executed when the one before has finished executing. This leads to predictable results, but can also lead to frustration as tasks that take a long time may delay other code from executing.</p>

<p>However, Javascript has the ability to run code asynchronously, ie with multiple tasks running at the same time. This makes javascript fast and therefore desirable for a web programming language.</p>

<p>However, because of this, you need to be careful how you write your code.  You will need to be aware of dependencies on values set in your program, and ensure you write your code so that the values you need are definately complete.  For example, there are many times when you need the return value of a function in order to proceed with the next step in your program.  One such example of this is a call to a database.  A database call can be relatively slow, so we need to tell our application to wait for the database result before it continues with certain steps.  Meanwhile however, some other steps are not dependent on the result and may proceed synchonously, ie. while we are still waiting for the result of earlier operations. this substantially speeds up our programme.</p>

<p>Study this article and its links for more information.</p>

<p><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous">MDN article on Asychronous javascript</a></p>

<h3 id="callbacks-and-promises">Callbacks and Promises</h3>

<p>There are a number of different styles of writing asynchronous code in Javascript which you may encounter.  We will use the most uptodate style which makes use of ‘Promises’.</p>

<p><em>“Essentially, a Promise is an object that represents an intermediate state of an operation — in effect, a promise that a result of some kind will be returned at some point in the future. There is no guarantee of exactly when the operation will complete and the result will be returned, but there is a guarantee that when the result is available, or the promise fails, the code you provide will be executed in order to do something else with a successful result, or to gracefully handle a failure case.”</em></p>

<p>https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Promises</p>

<p>Older styles of javascript uses ‘callbacks’ which can result in confusing, highly nested code.</p>

<p>In newer versions of javascript there are three language constructs which we will use to implement asynchronous code with promises:</p>

<p><strong>async</strong> functions.  If a function or method definition is prefaced with the work <strong>async</strong> then the progam knows that the function will likely contain code that must return a result before the next line is executed.</p>

<p><strong>await</strong> keyword.  This keyword indicates that the value needs to be obtained before the next code is executed.  A ‘Promise’ is returned in the interim</p>

<p>Try typing the following lines into your browser’s JS console:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">hello</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="dl">"</span><span class="s2">Hello</span><span class="dl">"</span> <span class="p">};</span>
<span class="nx">hello</span><span class="p">();</span>
</code></pre></div></div>

<p>But what if we turn this into an async function? Try the following:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">async</span> <span class="kd">function</span> <span class="nx">hello</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="dl">"</span><span class="s2">Hello</span><span class="dl">"</span> <span class="p">};</span>
<span class="nx">hello</span><span class="p">();</span>
</code></pre></div></div>
<p>In the second version, a Promise is returned (in this case it is immediately fulfilled as the code does not take time to execute)</p>

<p>Within an async function, the ‘await’ keyword will be found: ‘await’ can ONLY be used within functions with the async keyword, and can be called on any function that returns a promise.</p>

<p>Using <em>await</em> tells your program to only continue once the Promise has been resolved.  See the following example:</p>

<p><strong>.then()</strong></p>

<p>If you are outside an async function, and you need to make sure that your code calling an async function only executes when the fully ‘resolved’ value of the promise is returned, you can use a .then() block.</p>

<p>Because getting data from a database is one of the more time consuming operations, we will use async functions and promises in our code to ensure that we have the values we need for certain code blocks, while still being able to execute non-dependent blocks of code.</p>

<p>Examples taken from : 
<a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Introducing">MDN article on callbacks and promises</a></p>

<h2 id="your-first-database-driven-application">Your first database driven application</h2>

<p>By following the steps in our previous lab, you will have built your environment from my Docker starter recipe which makes a lot of things simple for you!  You will also have the necessary libraries installed and some code that manages the connection to your database.</p>

<p>Setup screencast: <a href="https://roehampton.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=c98901e7-f193-4b9b-b071-af3e018163fb">Screencast Link</a>
Scaffolding files: <a href="https://moodle.roehampton.ac.uk/mod/url/view.php?id=1269475">Files link</a></p>

<h3 id="checklist-1--getting-your-environment-running-again">Checklist 1:  Getting your environment running again</h3>

<ul>
  <li>Can you run <code class="language-plaintext highlighter-rouge">docker-compose up</code> without error
Can you access http://127.0.0.1:3000 without error and see the words ‘hello world’?</li>
  <li>With your containers running, can you alter this block of test code in app/app.js, save, then reload the browser and see your changes? (HINT: watch the console)</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">"</span><span class="s2">Hello world!</span><span class="dl">"</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>
<ul>
  <li>Can you access phpmyadmin at http://127.0.0.1:8081 and log in using your credentials set in your .env file?</li>
</ul>

<h3 id="checklist-2-check-your-understanding">Checklist 2: Check your understanding</h3>

<ul>
  <li><strong>Visit the file services/db.js.  Note the following:</strong></li>
</ul>

<ol>
  <li>we require the dotenv package which is able to read configuration from the .env file</li>
  <li>We require the mysql2 package (which has some more advanced features that the mysql npm package, specifically the part that works with Promises) see: https://www.npmjs.com/package/mysql2</li>
  <li>We use the mysql configuration to create a ‘pool’ of connections</li>
  <li>A utility async function query() is supplied that will handle sending a query to the database and returning rows as the result. (This function is a wrapper around the Mysql2 provided execute function which itself provides useful utilities such as prepared statements and releasing a connection back to the pool).</li>
</ol>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Utility function to query the database</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">query</span><span class="p">(</span><span class="nx">sql</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">rows</span><span class="p">,</span> <span class="nx">fields</span><span class="p">]</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">pool</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="nx">sql</span><span class="p">,</span> <span class="nx">params</span><span class="p">);</span>

  <span class="k">return</span> <span class="nx">rows</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><strong>Visit the app.js file. Note the following</strong></li>
</ul>

<ol>
  <li>Note that we require the db.js file to set up the database connection</li>
  <li>Check that each of the routes already defined work as expected. Make sure you understand every line of code.</li>
</ol>

<h3 id="adding-some-more-data-to-the-database">Adding some more data to the database</h3>

<p>Populate your database by adding the following data via SQL queries. You can do this in bulk straight into phpmyadmin.</p>

<ul>
  <li>Click onto the sd2-db database in the left sidebar</li>
  <li>Click SQL in the tabs along the top</li>
  <li>Paste the sql code below into the SQL window and click ‘go’</li>
  <li>You will see the tables and data being created</li>
</ul>

<p>NB: A screencast of this step is here:  which also includes some troubleshooting advice in case you get the error when your containers start of ‘port already allocated’.<a href="https://roehampton.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=1134b8ab-dc72-4ce3-bda7-af45010735f1">Import database screencast</a></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">Modules</span> <span class="p">(</span>
<span class="n">code</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
<span class="n">name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'CMP020C101'</span><span class="p">,</span><span class="s1">'Software Development 1'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'CMP020C102'</span><span class="p">,</span><span class="s1">'Computer Systems'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'CMP020C103'</span><span class="p">,</span><span class="s1">'Mathematics for Computer Science'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'CMP020C104'</span><span class="p">,</span><span class="s1">'Software Development 2'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'CMP020C105'</span><span class="p">,</span><span class="s1">'Computing and Society'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'CMP020C106'</span><span class="p">,</span><span class="s1">'Databases'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'PHY020C101'</span><span class="p">,</span><span class="s1">'Physics Skills and Techniques'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'PHY020C102'</span><span class="p">,</span><span class="s1">'Mathematics for Physics'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'PHY020C103'</span><span class="p">,</span><span class="s1">'Computation for Physics'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'PHY020C106'</span><span class="p">,</span><span class="s1">'Introduction to Astrophysics'</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">Programmes</span> <span class="p">(</span>
<span class="n">id</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
<span class="n">name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">));</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Programmes</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'09UU0001'</span><span class="p">,</span><span class="s1">'BSc Computer Science'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Programmes</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'09UU0002'</span><span class="p">,</span><span class="s1">'BEng Software Engineering'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Programmes</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'09UU0003'</span><span class="p">,</span><span class="s1">'BSc Physics'</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">Programme_Modules</span><span class="p">(</span>
<span class="n">programme</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="n">module</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">programme</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">Programmes</span><span class="p">(</span><span class="n">id</span><span class="p">),</span>
<span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">module</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">Modules</span><span class="p">(</span><span class="n">code</span><span class="p">));</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Programme_Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'09UU0001'</span><span class="p">,</span><span class="s1">'CMP020C101'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Programme_Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'09UU0001'</span><span class="p">,</span><span class="s1">'CMP020C102'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Programme_Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'09UU0001'</span><span class="p">,</span><span class="s1">'CMP020C103'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Programme_Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'09UU0001'</span><span class="p">,</span><span class="s1">'CMP020C104'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Programme_Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'09UU0001'</span><span class="p">,</span><span class="s1">'CMP020C105'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Programme_Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'09UU0001'</span><span class="p">,</span><span class="s1">'CMP020C106'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Programme_Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'09UU0002'</span><span class="p">,</span><span class="s1">'CMP020C101'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Programme_Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'09UU0002'</span><span class="p">,</span><span class="s1">'CMP020C102'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Programme_Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'09UU0002'</span><span class="p">,</span><span class="s1">'CMP020C103'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Programme_Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'09UU0002'</span><span class="p">,</span><span class="s1">'CMP020C104'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Programme_Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'09UU0002'</span><span class="p">,</span><span class="s1">'CMP020C105'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Programme_Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'09UU0002'</span><span class="p">,</span><span class="s1">'CMP020C106'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Programme_Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'09UU0003'</span><span class="p">,</span><span class="s1">'PHY020C101'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Programme_Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'09UU0003'</span><span class="p">,</span><span class="s1">'PHY020C102'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Programme_Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'09UU0003'</span><span class="p">,</span><span class="s1">'PHY020C103'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Programme_Modules</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'09UU0003'</span><span class="p">,</span><span class="s1">'PHY020C106'</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">Students</span><span class="p">(</span>
<span class="n">id</span> <span class="nb">INT</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
<span class="n">name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Students</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">'Kevin Chalmers'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Students</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="s1">'Lisa Haskel'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Students</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="s1">'Arturo Araujo'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Students</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="s1">'Sobhan Tehrani'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Students</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="s1">'Oge Okonor'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Students</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="s1">'Kimia Aksir'</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">Student_Programme</span><span class="p">(</span>
<span class="n">id</span> <span class="nb">INT</span><span class="p">,</span>
<span class="n">programme</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span>
<span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">Students</span><span class="p">(</span><span class="n">id</span><span class="p">),</span>
<span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">programme</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">Programmes</span><span class="p">(</span><span class="n">id</span><span class="p">));</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Student_Programme</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">'09UU0002'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Student_Programme</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="s1">'09UU0001'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Student_Programme</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="s1">'09UU0003'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Student_Programme</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="s1">'09UU0001'</span><span class="p">);</span>
</code></pre></div></div>

<p>You should now see tables listed in test_database, populated with values</p>

<p>Finally, you are ready to build some database-driven web pages!!</p>

<h3 id="beginning-a-database-driven-app-for-students-programmes-and-modules">Beginning a database-driven app for students, programmes and modules</h3>

<p>You will now work through the following tasks.  The first set are worked through for you in the provided video.</p>

<h4 id="worked-tasks">Worked tasks</h4>

<ol>
  <li>Provide JSON output listing all students</li>
  <li>Provide an HTML formatted output listing all students in a table where each student is linked to a single-student page</li>
  <li>Create a single-student page which lists a student name, their programme and their modules</li>
</ol>

<p>See the screencast for the worked example:
<a href="https://roehampton.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=d52ae6e3-d16f-43d8-83bc-add100d52764">https://roehampton.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=d52ae6e3-d16f-43d8-83bc-add100d52764</a></p>

<p>CONCENTRATE ON THE FIRST TWO TASKS</p>

<h4 id="independent-tasks">Independent tasks</h4>

<ol>
  <li>Provide a JSON output of all programmes</li>
  <li>Provide a HTML formatted output of all programmes in a table, where each programme is linked to a single-programme page</li>
  <li>Create a single-programme page showing the programme title and listing all modules for the programme</li>
  <li>Provide a JSON output of all modules</li>
  <li>Provide a HTML formatted output of all modules in a table, where each module is linked to a single-module page</li>
  <li>Provide a single-module page showing a module title, its programme and all the students for that module.</li>
</ol>

<h3 id="considering-best-practices">Considering best practices</h3>

<p>The worked example here is messy but it is useful as it provides a simple solution that introduces the most important principles all in one place, but this is not professional standard code.</p>

<p>Next week we will ‘refactor’ this code to provide a cleaner solution.  We will be usingthe following programming techniques to improve our code:</p>

<ul>
  <li>Custom classes</li>
  <li>Async functions and the await keyword</li>
  <li>Separation of presentation and functionality (hint: we will use the Pug templating system to do this)</li>
  <li>Adherence to accepted coding standards</li>
</ul>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
